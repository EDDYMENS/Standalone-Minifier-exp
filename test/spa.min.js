const fetchedContent={};function SPA(){const t=document.getElementById("main"),e=window.location.hostname;t.querySelectorAll("a").forEach((function(t){const n=t.getAttribute("href");if(n.includes("#")||t.hasAttribute("target"))return;const o=new URL(n,document.baseURI).pathname;t.hostname!==e||t.hasAttribute("data-no-preload")||fetchedContent[o]||fetch(n).then((t=>t.text())).then((e=>{fetchedContent[o]={content:e,title:t.textContent}}))})),t.addEventListener("click",(function(t){if(t.ctrlKey||t.metaKey||t.shiftKey||1===t.button)return;const e=t.target.closest("a");if(!e||e.getAttribute("target")||e.href.includes("#"))return;t.preventDefault();const n=new URL(e.href,document.baseURI).pathname,o=fetchedContent[n];o?(window.history.pushState({title:o.title},o.title,n),function(t){document.body.innerHTML=stripAssets(t.content),window.kickStart(),"function"==typeof codeWrapFunc&&codeWrapFunc(),SPA(),function(){const t=document.querySelector(".active-tag");t?t.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}):window.scrollTo(0,0)}()}(o)):window.location.href=e.href}))}function handlePopState(){if(window.location.href.includes("#"))return;const t=window.location.pathname,e=fetchedContent[t];e?updatePageContent(e):window.location.href=window.location.href}function stripAssets(t){const e=document.createElement("div");return e.innerHTML=t,e.querySelectorAll('link[rel="stylesheet"]').forEach((t=>t.remove())),e.innerHTML}document.addEventListener("DOMContentLoaded",SPA),window.addEventListener("popstate",handlePopState);